<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Telecom Drop Prediction</title>

<style>
  body {
    margin: 0;
    padding: 0;
    font-family: "Segoe UI", Arial;
    background: #f4f6f9;
  }

  /* Header */
  .header {
    background: linear-gradient(90deg, #0066ff, #00c3ff);
    padding: 22px;
    color: white;
    text-align: center;
    font-size: 26px;
    font-weight: 600;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }

  /* Container */
  .container {
    width: 90%;
    max-width: 850px;
    margin: 30px auto;
    display: flex;
    flex-direction: column;
    gap: 25px;
  }

  /* Card */
  .card {
    background: white;
    padding: 22px;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
  }

  .card h2 {
    margin-top: 0;
    margin-bottom: 18px;
    font-size: 22px;
    border-left: 4px solid #007bff;
    padding-left: 10px;
  }

  label {
    display: block;
    margin-top: 12px;
    font-weight: 600;
  }

  input, select {
    padding: 10px;
    width: 260px;
    margin-top: 5px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 15px;
  }

  .btn {
    padding: 10px 18px;
    border: none;
    border-radius: 6px;
    margin-top: 20px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 600;
  }

  .predict-btn {
    background: #007bff;
    color: white;
  }

  .predict-btn:hover {
    background: #005fcc;
  }

  #error {
    color: crimson;
    margin-top: 12px;
    font-weight: 600;
  }

  #result p {
    font-size: 17px;
    margin: 8px 0;
  }

  .highlight {
    font-weight: 700;
    color: #007bff;
  }

</style>
</head>

<body>

<div class="header">ðŸ“¡ Telecom Drop Prediction Dashboard</div>

<div class="container">

  <!-- Input Card -->
  <div class="card">
    <h2>Enter Network Parameters</h2>

    <label>Region
      <select id="region">
        <option>Urban</option>
        <option>Rural</option>
        <option>Highway</option>
      </select>
    </label>

    <label>Signal Strength (dBm)
      <input id="signal" value="-85" />
    </label>

    <label>Latency (ms)
      <input id="latency" value="100" />
    </label>

    <label>Jitter (ms)
      <input id="jitter" value="10" />
    </label>

    <label>Throughput (kbps)
      <input id="throughput" value="2500" />
    </label>

    <label>Packet Loss (%)
      <input id="packet" value="1.2" />
    </label>

    <label>Hour (0â€“23)
      <input id="hour" value="12" />
    </label>

    <button class="btn predict-btn" onclick="predict()">Predict</button>

    <div id="error"></div>
  </div>

  <!-- Result Card -->
  <div class="card">
    <h2>Prediction Output</h2>

    <p id="prob">Drop Probability: -</p>
    <p id="risk">Drop Risk: -</p>
    <p id="label">Predicted Label: -</p>
  </div>

</div>

<script>
async function predict() {

  document.getElementById('error').innerText = '';
  document.getElementById('prob').innerText = 'Drop Probability: ...';

  const data = {
    region_type: document.getElementById("region").value,
    signal_strength: parseFloat(document.getElementById("signal").value),
    latency_ms: parseFloat(document.getElementById("latency").value),
    jitter_ms: parseFloat(document.getElementById("jitter").value),
    throughput_kbps: parseFloat(document.getElementById("throughput").value),
    packet_loss_percent: parseFloat(document.getElementById("packet").value),
    hour_num: parseInt(document.getElementById("hour").value)
  };

  try {
    const res = await fetch("/predict", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    if (!res.ok) {
      const txt = await res.text();
      document.getElementById('error').innerText = `Server ${res.status}: ${txt}`;
      return;
    }

    const out = await res.json();

    document.getElementById('prob').innerHTML =
      `Drop Probability: <span class="highlight">${(out.drop_probability * 100).toFixed(2)}%</span>`;

    document.getElementById('risk').innerHTML =
      `Drop Risk: <span class="highlight">${out.drop_risk}</span>`;

    document.getElementById('label').innerHTML =
      `Predicted Label: <span class="highlight">${out.predicted_label}</span>`;

  } catch (err) {
    document.getElementById('error').innerText = "Network error: " + err;
  }
}
</script>

</body>
</html>
